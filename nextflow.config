/*
 * -------------------------------------------------
 *  Plague Pipeline NextFlow Config File
 * -------------------------------------------------
 * Default Configuration options
 */

// Global Default Parameters
params{
  version = false
  help = false

  // Path to ncbimeta yaml config and db
  ncbimeta_create = false
  ncbimeta_update = false
  ncbimeta_annot = false
  sqlite = false

  // Output directory default
  outdir = "$baseDir/results"

  // Scripts directory
  scriptdir = "$baseDir/scripts"

  // Skip processes
  skip_ncbimeta_db_create = false
  skip_ncbimeta_db_update = false
  skip_sqlite_import = false
  skip_assembly_download = false
  skip_reference_download = false
  skip_snippy_pairwise = false
  skip_snippy_variant_summary = false
  skip_snippy_detect_snp_high_density = false
  skip_reference_detect_repeats = false
  skip_reference_detect_low_complexity = false

  // Other to be sorted
  max_datasets = 100

  // NCBImetaJoin First Parameters
  ncbimeta_join_first_final = "MasterMinusPubmed"
  ncbimeta_join_first_uniq = "'BioSampleAccession BioSampleAccessionSecondary BioSampleSRAAccession BioSampleBioProjectAccession'"
  ncbimeta_join_first_accessory = "'Assembly SRA BioProject Nucleotide'"
  ncbimeta_join_first_anchor = "BioSample"

  // NCBImetaJoin Second Parameters
  ncbimeta_join_second_final = "Master"
  ncbimeta_join_second_uniq = "'BioSampleAccession BioProjectPublicationID'"
  ncbimeta_join_second_accessory = "'Pubmed'"
  ncbimeta_join_second_anchor = "MasterMinusPubmed"

  // NCBImeta parameters
  ncbimeta_output_dir = "output"
  ncbimeta_sqlite_db = "yersinia_pestis_db.sqlite"
  ncbimeta_sqlite_db_latest = "${params.outdir}/ncbimeta_db/update/latest/${params.ncbimeta_output_dir}/database/${params.ncbimeta_sqlite_db}"

  // NCBImetaAnnotate parameters
  ncbimeta_annot_table = "BioSample"

  // Genbank and assembly
  genbank_assembly_gz_suffix = "_genomic.fna.gz"
  genbank_assembly_fna_suffix = "_genomic.fna"
  file_assembly_for_download_ftp = "assembly_for_download.txt"
  reference_genome_ftp = "ftp://ftp.ncbi.nlm.nih.gov/genomes/all/GCF/000/009/065/GCF_000009065.1_ASM906v1/GCF_000009065.1_ASM906v1_genomic.fna.gz"

  // Snippy Paramaeters
  snippy_ctg_depth = 10
  snippy_map_qual = 30
  snippy_min_frac = 0.9
  snippy_base_qual = 20
  snippy_cpus = 4

  // Snippy summary files
  snippy_variant_summary = "snippy_variant_summary"

  // Snippy filterin
  snippy_snp_density_window = 10
  snippy_variant_density = "snippy_variant_density"

  // SQLite
  sqlite_select_command = "\'SELECT AssemblyFTPGenbank FROM Master WHERE BioSampleComment NOT LIKE \"%REMOVE%\"\'"

  // MultiQC
  multiqc_config = "$baseDir/multiqc_config.yaml"

}

// Manifest and publishing
manifest {
  name = 'Plague Pipeline'
  author = 'Katherine Eaton'
  homePage = 'https://github.com/ktmeaton/paper-phylogeography'
  version = '0.1.0'
  description = 'Plague Phylogeography Pipeline'
  mainScript = 'pipeline.nf'
  nextflowVersion = '>=20.01.0'
}

// Process
//process.conda = "$baseDir/phylo-env.yaml"
